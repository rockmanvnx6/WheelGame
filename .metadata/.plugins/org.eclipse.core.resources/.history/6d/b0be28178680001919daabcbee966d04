package controller;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JOptionPane;
import javax.swing.JTextField;

import model.PlayerGUI;
import model.SimplePlayer;
import model.interfaces.GameEngine;
import model.interfaces.Player;
import view.MainFrame;

public class AddPlayerAction implements ActionListener {
	private MainFrame view;
	private GameEngine model;
	private int ID = 0;
	
	public AddPlayerAction(GameEngine model, MainFrame view) {
		this.view = view;
		this.model = model;
	}
	@Override
	public void actionPerformed(ActionEvent e) {
		try {

			JTextField playerName = new JTextField();
			JTextField points = new JTextField();
			Object[] inputFields = {"Please set your name: ", playerName, "Please set your point: ", points};
			
			int selection = JOptionPane.showConfirmDialog(view, inputFields);
			if(selection == JOptionPane.OK_OPTION) {
				String playerID = String.valueOf(ID++);
				Player thisPlayer = new PlayerGUI(playerID, playerName.getText(), Integer.parseInt(points.getText()));
				model.addPlayer(thisPlayer);
				view.getSummaryPanel().updateAllPlayers();
				view.getToolBar().updateAllPlayers();
			} else {
				JOptionPane.showMessageDialog(view, "Cancelled add player action");
			}
			
		} catch (Exception err) {
			JOptionPane.showMessageDialog(view, "Player is not added", "Error", JOptionPane.ERROR_MESSAGE);
			System.out.println(err);
		}
	} 

}
